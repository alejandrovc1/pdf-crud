import{y as u,z as d,A as l,m as a,B as t,a8 as b,a9 as p}from"./index.9339ce7c.js";import{_ as v,l as i}from"./VBtn.6444bd1f.js";import{V as h,a as F,b as n,c as f,d as g,e as V,f as w,g as y,h as o}from"./VTextField.9bf090a3.js";const k={data:()=>({alert:{show:!1,message:""},emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],passwordRules:[e=>!!e||"Password is required",e=>e&&e.length>=2||"Password must be more than 2 characters"],user:{email:"",password:""},suForm:!0}),methods:{async signup(){if((await this.$refs.signupForm.validate()).valid)try{const s=await this.axios.post("/signup",this.user);sessionStorage.setItem("session",JSON.stringify(s.data)),this.$router.push("/crud")}catch(s){this.alert={show:!0,type:"error",message:s.response.data.message}}},async signin(){if((await this.$refs.signinForm.validate()).valid)try{const s=await this.axios.post("/signin",this.user);s.data.NotFound?this.alert={show:!0,type:"error",message:s.data.message}:(sessionStorage.setItem("session",JSON.stringify(s.data)),this.$router.push("/crud"))}catch(s){this.alert={show:!0,type:"error",message:s.response.data.message}}}}};function $(e,s,S,C,R,m){return u(),d(h,null,{default:l(()=>[a(F,{text:"",modelValue:e.alert.show,"onUpdate:modelValue":s[0]||(s[0]=r=>e.alert.show=r),type:e.alert.type,dismissible:""},{default:l(()=>[t(b(e.alert.message),1)]),_:1},8,["modelValue","type"]),a(f,{justify:"center"},{default:l(()=>[a(n,{class:"text-center",md:"2",sm:"2"},{default:l(()=>[a(i,{onClick:s[1]||(s[1]=r=>e.suForm=!0)},{default:l(()=>[t("sign up")]),_:1})]),_:1}),a(n,{class:"text-center",md:"2",sm:"2"},{default:l(()=>[a(i,{onClick:s[2]||(s[2]=r=>e.suForm=!1)},{default:l(()=>[t("sign in")]),_:1})]),_:1})]),_:1}),a(f,{justify:"center"},{default:l(()=>[a(n,{md:"6",sm:"6"},{default:l(()=>[e.suForm?(u(),d(g,{key:0},{default:l(()=>[a(V,null,{default:l(()=>[t("Sign Up")]),_:1}),a(w,null,{default:l(()=>[a(y,{class:"ma-3",onSubmit:s[5]||(s[5]=p(r=>m.signup(),["prevent"])),ref:"signupForm"},{default:l(()=>[a(o,{label:"E-mail","prepend-icon":"mdi-email",rules:e.emailRules,modelValue:e.user.email,"onUpdate:modelValue":s[3]||(s[3]=r=>e.user.email=r)},null,8,["rules","modelValue"]),a(o,{label:"Password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules,modelValue:e.user.password,"onUpdate:modelValue":s[4]||(s[4]=r=>e.user.password=r)},null,8,["rules","modelValue"]),a(i,{block:"",class:"primary mt-3",type:"submit"},{default:l(()=>[t("sign up")]),_:1})]),_:1},512)]),_:1})]),_:1})):(u(),d(g,{key:1},{default:l(()=>[a(V,null,{default:l(()=>[t("Sign In")]),_:1}),a(w,null,{default:l(()=>[a(y,{class:"ma-3",onSubmit:s[8]||(s[8]=p(r=>m.signin(),["prevent"])),ref:"signinForm"},{default:l(()=>[a(o,{label:"E-mail","prepend-icon":"mdi-email",rules:e.emailRules,modelValue:e.user.email,"onUpdate:modelValue":s[6]||(s[6]=r=>e.user.email=r)},null,8,["rules","modelValue"]),a(o,{label:"Password","prepend-icon":"mdi-lock",type:"password",rules:e.passwordRules,modelValue:e.user.password,"onUpdate:modelValue":s[7]||(s[7]=r=>e.user.password=r)},null,8,["rules","modelValue"]),a(i,{block:"",class:"success mt-3",type:"submit"},{default:l(()=>[t("sign in")]),_:1})]),_:1},512)]),_:1})]),_:1}))]),_:1})]),_:1})]),_:1})}const E=v(k,[["render",$]]);export{E as default};
